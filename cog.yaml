# ðŸš€ SEESR + SD Turbo - Configurazione Cog Ottimizzata
# Reference: https://github.com/replicate/cog/blob/main/docs/yaml.md

build:
  gpu: true
  cuda: "11.8"
  system_packages:
    - "libgl1-mesa-glx"
    - "libglib2.0-0"
    - "libsm6"
    - "libxext6"
    - "libxrender-dev"
    - "libgomp1"
    - "ffmpeg"
    - "git"
  python_version: "3.10"
  python_packages:
    # Core PyTorch ecosystem (versioni aggiornate per SD Turbo)
    - "torch>=2.1.0"
    - "torchvision>=0.16.0"  
    - "torchaudio>=2.1.0"
    
    # Diffusers ecosystem (compatibilitÃ  SD Turbo)
    - "diffusers>=0.21.4"
    - "transformers>=4.33.2"
    - "accelerate>=0.22.0"
    - "safetensors>=0.3.3"
    - "huggingface_hub>=0.16.4"
    
    # Computer Vision & Image Processing
    - "opencv-python>=4.8.1.78"
    - "Pillow>=10.0.0"
    - "numpy>=1.24.3"
    - "scipy>=1.11.2"
    - "scikit-image>=0.21.0"
    
    # SEESR Dependencies
    - "timm>=0.9.7"
    - "basicsr>=1.4.2"
    - "facexlib>=0.3.0"
    - "gfpgan>=1.3.8"
    - "realesrgan>=0.3.0"
    - "controlnet-aux>=0.0.7"
    
    # Memory & Performance Optimizations
    - "xformers>=0.0.21"
    - "einops>=0.6.1"
    
    # Configuration & Training
    - "pytorch-lightning>=2.0.7"
    - "omegaconf>=2.3.0"
    
    # Signal Processing (per wavelet color fix)
    - "PyWavelets>=1.4.1"
    - "matplotlib>=3.7.2"

# Entry point del predictor
predict: "predict.py:Predictor"